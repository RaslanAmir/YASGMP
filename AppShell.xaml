<?xml version="1.0" encoding="utf-8" ?>
<Shell
    x:Class="YasGMP.AppShell"
    xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
    xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
    xmlns:local="clr-namespace:YasGMP"
    xmlns:views="clr-namespace:YasGMP.Views"
    xmlns:debug="clr-namespace:YasGMP.Views.Debug"
    xmlns:pages="clr-namespace:YasGMP.Pages"
    Shell.FlyoutBehavior="Flyout">

  <!-- Top toolbar -->
  <Shell.ToolbarItems>
    <ToolbarItem Text="Dashboard" Clicked="OnToolbarGoDashboard" />
    <ToolbarItem Text="Work Orders" Clicked="OnToolbarGoWorkOrders" />
    <ToolbarItem Text="Machines" Clicked="OnToolbarGoMachines" />
    <ToolbarItem Text="Parts" Clicked="OnToolbarGoParts" />
    <ToolbarItem Text="Suppliers" Clicked="OnToolbarGoSuppliers" />
    <ToolbarItem Text="Components" Clicked="OnToolbarGoComponents" />
    <ToolbarItem Text="External" Clicked="OnToolbarGoExternal" />
    <ToolbarItem Text="PPM" Clicked="OnToolbarGoPpm" />
    <ToolbarItem Text="Calibrations" Clicked="OnToolbarGoCalibrations" />
    <ToolbarItem Text="CAPA" Clicked="OnToolbarGoCapa" />
    <ToolbarItem Text="Validation" Clicked="OnToolbarGoValidation" />
    <ToolbarItem Text="Audit Dash" Clicked="OnToolbarGoAuditDash" />
    <ToolbarItem Text="Audit Log" Clicked="OnToolbarGoAuditLog" />
    <ToolbarItem Text="Users" Clicked="OnToolbarGoUsers" />
    <ToolbarItem Text="RBAC" Clicked="OnToolbarGoRbac" />
    <ToolbarItem Text="Admin" Clicked="OnToolbarGoAdmin" />
    <ToolbarItem Text="Rollback" Clicked="OnToolbarGoRollback" />
    <ToolbarItem Text="Diagnostics" Clicked="OnToolbarGoDebug" />
  </Shell.ToolbarItems>

  <!-- Tabbed navigation -->
  <TabBar
      Shell.BackgroundColor="{StaticResource YtSurfaceCard}"
      Shell.ForegroundColor="{StaticResource YtOnSurface}"
      Shell.TitleColor="{StaticResource YtOnSurface}">

    <!-- HOME -->
    <Tab Title="Home">
      <!-- FIX: DashboardPage lives in namespace YasGMP (not YasGMP.Views) -->
      <ShellContent Title="Dashboard" Route="routes/dashboard"
                    ContentTemplate="{DataTemplate local:DashboardPage}" />
    </Tab>

    <!-- OPERATIONS -->
    <Tab Title="Operations">
      <ShellContent Title="Work Orders" Route="routes/workorders"
                    ContentTemplate="{DataTemplate views:WorkOrdersPage}" />
      <ShellContent Title="Machines" Route="routes/machines"
                    ContentTemplate="{DataTemplate views:MachinesPage}" />
      <ShellContent Title="Calibrations" Route="routes/calibrations"
                    ContentTemplate="{DataTemplate views:CalibrationsPage}" />
      <ShellContent Title="Parts" Route="routes/parts"
                    ContentTemplate="{DataTemplate views:PartsPage}" />
      <ShellContent Title="Suppliers" Route="routes/suppliers"
                    ContentTemplate="{DataTemplate views:SuppliersPage}" />
      <ShellContent Title="Components" Route="routes/components"
                    ContentTemplate="{DataTemplate views:ComponentsPage}" />
      <ShellContent Title="External Servicers" Route="routes/externalservicers"
                    ContentTemplate="{DataTemplate local:ExternalServicersPage}" />
      <ShellContent Title="PPM" Route="routes/ppm"
                    ContentTemplate="{DataTemplate pages:PpmPage}" />
    </Tab>

    <!-- QUALITY / COMPLIANCE -->
    <Tab Title="Quality">
      <ShellContent Title="CAPA" Route="routes/capa"
                    ContentTemplate="{DataTemplate views:CapaPage}" />
      <ShellContent Title="Validation" Route="routes/validation"
                    ContentTemplate="{DataTemplate views:ValidationPage}" />
      <ShellContent Title="Audit Dashboard" Route="routes/auditdashboard"
                    ContentTemplate="{DataTemplate views:AuditDashboardPage}" />
      <ShellContent Title="Audit Log" Route="routes/auditlog"
                    ContentTemplate="{DataTemplate views:AuditLogPage}" />
    </Tab>

    <!-- ADMIN -->
    <Tab Title="Admin">
      <ShellContent Title="Users" Route="routes/users"
                    ContentTemplate="{DataTemplate views:UsersPage}" />
      <ShellContent Title="RBAC" Route="routes/rbac"
                    ContentTemplate="{DataTemplate views:UserRolePermissionPage}" />
      <ShellContent Title="Admin Panel" Route="routes/adminpanel"
                    ContentTemplate="{DataTemplate views:AdminPanelPage}" />
      <ShellContent Title="Rollback Preview" Route="routes/rollbackpreview"
                    ContentTemplate="{DataTemplate views:RollbackPreviewPage}" />
    </Tab>

    <!-- DEBUG: always visible while app is in development -->
    <Tab Title="Debug">
      <ShellContent Title="Diagnostics" Route="routes/debug"
                    ContentTemplate="{DataTemplate debug:DebugDashboardPage}" />
      <ShellContent Title="Logs" Route="routes/logviewer"
                    ContentTemplate="{DataTemplate debug:LogViewerPage}" />
      <ShellContent Title="Health" Route="routes/health"
                    ContentTemplate="{DataTemplate debug:HealthPage}" />
    </Tab>
  </TabBar>

  <!-- Global Shell visuals -->
  <Shell.Resources>
    <Style TargetType="Shell">
      <Setter Property="Shell.BackgroundColor" Value="{StaticResource YtSurface}" />
      <Setter Property="Shell.ForegroundColor" Value="{StaticResource YtOnSurface}" />
      <Setter Property="Shell.TitleColor"      Value="{StaticResource YtOnSurface}" />
      <Setter Property="NavBarIsVisible"       Value="True" />
    </Style>
  </Shell.Resources>

</Shell>
