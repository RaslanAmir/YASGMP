<?xml version="1.0" encoding="utf-8" ?>
<Shell
    x:Class="YasGMP.AppShell"
    xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
    xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
    xmlns:local="clr-namespace:YasGMP"
    xmlns:views="clr-namespace:YasGMP.Views"
    xmlns:debug="clr-namespace:YasGMP.Views.Debug"
    xmlns:pages="clr-namespace:YasGMP.Pages"
    Shell.FlyoutBehavior="Flyout">

  <!-- Top toolbar -->
  <Shell.ToolbarItems>
    <ToolbarItem Text="Dashboard"    Clicked="OnToolbarGoDashboard" />
    <ToolbarItem Text="Work Orders"  Clicked="OnToolbarGoWorkOrders" />
    <ToolbarItem Text="Machines"     Clicked="OnToolbarGoMachines" />
    <ToolbarItem Text="Parts"        Clicked="OnToolbarGoParts" />
    <ToolbarItem Text="Warehouses"   Clicked="OnToolbarGoWarehouses" />
    <ToolbarItem Text="Suppliers"    Clicked="OnToolbarGoSuppliers" />
    <ToolbarItem Text="Components"   Clicked="OnToolbarGoComponents" />
    <ToolbarItem Text="External"     Clicked="OnToolbarGoExternal" />
    <ToolbarItem Text="PPM"          Clicked="OnToolbarGoPpm" />
    <ToolbarItem Text="Calibrations" Clicked="OnToolbarGoCalibrations" />
    <ToolbarItem Text="CAPA"         Clicked="OnToolbarGoCapa" />
    <ToolbarItem Text="Validation"   Clicked="OnToolbarGoValidation" />
    <ToolbarItem Text="Audit Dash"   Clicked="OnToolbarGoAuditDash" />
    <ToolbarItem Text="Audit Log"    Clicked="OnToolbarGoAuditLog" />
    <ToolbarItem Text="Users"        Clicked="OnToolbarGoUsers" />
    <ToolbarItem Text="RBAC"         Clicked="OnToolbarGoRbac" />
    <ToolbarItem Text="Admin"        Clicked="OnToolbarGoAdmin" />
    <ToolbarItem Text="Rollback"     Clicked="OnToolbarGoRollback" />
    <ToolbarItem Text="Diagnostics"  Clicked="OnToolbarGoDebug" />
  </Shell.ToolbarItems>

  <!-- Give the TabBar and each Tab an explicit Route -->
  <TabBar Route="root"
          Shell.BackgroundColor="{StaticResource YtSurfaceCard}"
          Shell.ForegroundColor="{StaticResource YtOnSurface}"
          Shell.TitleColor="{StaticResource YtOnSurface}">

    <!-- HOME -->
    <Tab Title="Home" Route="home">
      <ShellContent Title="Dashboard" Route="dashboard"
                    ContentTemplate="{DataTemplate local:DashboardPage}" />
    </Tab>

    <!-- OPERATIONS -->
    <Tab Title="Operations" Route="ops">
      <ShellContent Title="Work Orders"   Route="workorders"
                    ContentTemplate="{DataTemplate views:WorkOrdersPage}" />
      <ShellContent Title="Machines"      Route="machines"
                    ContentTemplate="{DataTemplate views:MachinesPage}" />
      <ShellContent Title="Calibrations"  Route="calibrations"
                    ContentTemplate="{DataTemplate views:CalibrationsPage}" />
      <ShellContent Title="Parts"         Route="parts"
                    ContentTemplate="{DataTemplate views:PartsPage}" />
      <ShellContent Title="Warehouses"    Route="warehouses"
                    ContentTemplate="{DataTemplate views:WarehousePage}" />
      <ShellContent Title="Suppliers"     Route="suppliers"
                    ContentTemplate="{DataTemplate views:SuppliersPage}" />
      <ShellContent Title="Components"    Route="components"
                    ContentTemplate="{DataTemplate views:ComponentsPage}" />
      <ShellContent Title="External Serv." Route="externalservicers"
                    ContentTemplate="{DataTemplate local:ExternalServicersPage}" />
      <ShellContent Title="PPM"           Route="ppm"
                    ContentTemplate="{DataTemplate pages:PpmPage}" />
    </Tab>

    <!-- QUALITY / COMPLIANCE -->
    <Tab Title="Quality" Route="quality">
      <ShellContent Title="CAPA"            Route="capa"
                    ContentTemplate="{DataTemplate views:CapaPage}" />
      <ShellContent Title="Validation"      Route="validation"
                    ContentTemplate="{DataTemplate views:ValidationPage}" />
      <ShellContent Title="Documents"       Route="documents"
                    ContentTemplate="{DataTemplate views:DocumentControlPage}" />
      <ShellContent Title="Audit Dashboard" Route="auditdashboard"
                    ContentTemplate="{DataTemplate views:AuditDashboardPage}" />
      <ShellContent Title="Audit Log"       Route="auditlog"
                    ContentTemplate="{DataTemplate views:AuditLogPage}" />
    </Tab>

    <!-- ADMIN -->
    <Tab Title="Admin" Route="admin">
      <ShellContent Title="Users"            Route="users"
                    ContentTemplate="{DataTemplate views:UsersPage}" />
      <ShellContent Title="RBAC"             Route="rbac"
                    ContentTemplate="{DataTemplate views:UserRolePermissionPage}" />
      <ShellContent Title="Admin Panel"      Route="adminpanel"
                    ContentTemplate="{DataTemplate views:AdminPanelPage}" />
      <ShellContent Title="Rollback Preview" Route="rollbackpreview"
                    ContentTemplate="{DataTemplate views:RollbackPreviewPage}" />
    </Tab>

    <!-- DEBUG -->
    <Tab Title="Debug" Route="debug">
      <ShellContent Title="Diagnostics" Route="debug_dashboard"
                    ContentTemplate="{DataTemplate debug:DebugDashboardPage}" />
      <ShellContent Title="Logs"        Route="logviewer"
                    ContentTemplate="{DataTemplate debug:LogViewerPage}" />
      <ShellContent Title="Health"      Route="health"
                    ContentTemplate="{DataTemplate debug:HealthPage}" />
    </Tab>
  </TabBar>

  <Shell.Resources>
    <Style TargetType="Shell">
      <Setter Property="Shell.BackgroundColor" Value="{StaticResource YtSurface}" />
      <Setter Property="Shell.ForegroundColor" Value="{StaticResource YtOnSurface}" />
      <Setter Property="Shell.TitleColor"      Value="{StaticResource YtOnSurface}" />
      <Setter Property="NavBarIsVisible"       Value="True" />
    </Style>
  </Shell.Resources>

</Shell>
