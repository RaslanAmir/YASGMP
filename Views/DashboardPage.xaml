<?xml version="1.0" encoding="utf-8"?>
<ContentPage
    x:Class="YasGMP.DashboardPage"
    xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
    xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
    xmlns:maui="http://schemas.microsoft.com/dotnet/2021/maui"
    Title="Dashboard – YasGMP">

  <ContentPage.Content>
    <ScrollView xmlns:sf="http://schemas.syncfusion.com/maui">
      <VerticalStackLayout Spacing="28" Padding="32" BackgroundColor="{StaticResource YtSurface}">

        <Border Padding="28"
                Background="{StaticResource YtSurfaceCard}"
                Stroke="{StaticResource YtRowBorder}"
                StrokeThickness="1"
                VerticalOptions="CenterAndExpand"
                HorizontalOptions="CenterAndExpand"
                WidthRequest="540">
          <Border.StrokeShape>
            <RoundRectangle CornerRadius="16" />
          </Border.StrokeShape>
          <Border.Shadow>
            <Shadow />
          </Border.Shadow>
          <VerticalStackLayout Spacing="20">

            <!-- FIX: TextColor now uses a valid theme key (YtPrimary700) instead of missing 'YtPrimary' -->
            <Label Text="YasGMP – GMP Dashboard"
                   FontSize="24"
                   FontAttributes="Bold"
                   HorizontalOptions="Center"
                   TextColor="{StaticResource YtPrimary700}" />

            <BoxView HeightRequest="2" Color="{StaticResource YtRowBorder}" />

            <!-- User header -->
            <Label x:Name="UserNameLabel"
                   FontSize="16"
                   TextColor="{StaticResource YtOnSurface}"
                   FontAttributes="Bold"
                   maui:ToolTipProperties.Text="Ime i prezime prijavljenog korisnika." />

            <Label x:Name="UserRoleLabel"
                   FontSize="15"
                   TextColor="{StaticResource YtOnSurfaceDim}"
                   FontAttributes="Italic"
                   maui:ToolTipProperties.Text="Trenutna GMP uloga korisnika." />

            <BoxView HeightRequest="8" Color="Transparent" />

            <Label Text="Brzi izbornik:" FontSize="15" TextColor="{StaticResource YtPrimary700}" FontAttributes="Bold" />

            <Grid ColumnDefinitions="*,*" RowDefinitions="*,*,*" ColumnSpacing="14" RowSpacing="12">

              <sf:SfEffectsView x:Name="MachinesButton">
                <Border Padding="14" Background="{StaticResource YtSurface}"
                        Stroke="{StaticResource YtRowBorder}" StrokeThickness="1">
                  <Border.StrokeShape>
                    <RoundRectangle CornerRadius="12" />
                  </Border.StrokeShape>
                  <Border.Shadow>
                    <Shadow />
                  </Border.Shadow>
                  <Border.GestureRecognizers>
                    <TapGestureRecognizer Tapped="OnMachinesClicked" NumberOfTapsRequired="1" />
                  </Border.GestureRecognizers>
                  <Label Text="Strojevi / Oprema" HorizontalOptions="Center" VerticalOptions="Center"
                         TextColor="{StaticResource YtOnSurface}" />
                </Border>
              </sf:SfEffectsView>
              <Button x:Name="PartsButton"      Grid.Column="1" Text="Dijelovi / Skladište" Clicked="OnPartsClicked" />
              <Button x:Name="WorkOrdersButton" Grid.Row="1"   Text="Radni nalozi"         Clicked="OnWorkOrdersClicked" />
              <Button x:Name="CapaButton"       Grid.Row="1" Grid.Column="1" Text="CAPA (Korektivne akcije)" Clicked="OnCapaClicked" />
              <Button x:Name="ValidationButton" Grid.Row="2"   Text="Validacije (IQ/OQ/PQ)" Clicked="OnValidationClicked" />
              <Button x:Name="AdminPanelButton" Grid.Row="2" Grid.Column="1" Text="Admin panel" Clicked="OnAdminPanelClicked" />
            </Grid>

            <BoxView HeightRequest="12" Color="Transparent" />

            <Button x:Name="LogoutButton"
                    Text="Odjava"
                    Clicked="OnLogoutClicked" />

            <Label Text="YasGMP – GMP Maintenance, Audit &amp; Compliance"
                   FontSize="12"
                   HorizontalOptions="Center"
                   TextColor="{StaticResource YtOnSurfaceDim}" />
          </VerticalStackLayout>
        </Border>

      </VerticalStackLayout>
    </ScrollView>
  </ContentPage.Content>
</ContentPage>
