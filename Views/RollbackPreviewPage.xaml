<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             x:Class="YasGMP.Views.RollbackPreviewPage"
             Title="Rollback Preview">

    <VerticalStackLayout Padding="10">
        <Label Text="Rollback Preview" FontSize="20" FontAttributes="Bold" HorizontalOptions="Center"/>
        <Label Text="{Binding SelectedAudit.EntityName}" FontAttributes="Italic" FontSize="14"/>

        <!-- ðŸ”„ Old vs New JSON Diff -->
        <Grid ColumnDefinitions="*,*" RowDefinitions="Auto,*" RowSpacing="5">
            <Label Text="Old Value" Grid.Row="0" Grid.Column="0" FontAttributes="Bold"/>
            <Label Text="New Value" Grid.Row="0" Grid.Column="1" FontAttributes="Bold"/>
            <Editor Text="{Binding OldJson}" Grid.Row="1" Grid.Column="0" IsReadOnly="True" AutoSize="TextChanges"/>
            <Editor Text="{Binding NewJson}" Grid.Row="1" Grid.Column="1" IsReadOnly="True" AutoSize="TextChanges"/>
        </Grid>

        <!-- âœ… Validation & Action -->
        <HorizontalStackLayout Spacing="10" Margin="0,10,0,0">
            <Label Text="Signature:" FontAttributes="Bold"/>
            <Label Text="{Binding SignatureStatus}" TextColor="{Binding SignatureColor}"/>
            <Button Text="Rollback" Command="{Binding RollbackCommand}" IsEnabled="{Binding CanRollback}" />
            <Button Text="Close" Command="{Binding CloseCommand}" />
        </HorizontalStackLayout>
    </VerticalStackLayout>
</ContentPage>
