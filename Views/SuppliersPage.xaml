<?xml version="1.0" encoding="utf-8" ?>
<ContentPage 
    x:Class="YasGMP.Views.SuppliersPage"
    xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
    xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
    xmlns:maui="http://schemas.microsoft.com/dotnet/2021/maui"
    xmlns:views="clr-namespace:YasGMP.Views"
    xmlns:models="clr-namespace:YasGMP.Models;assembly=YasGMP.AppCore"
    x:DataType="views:SuppliersPage"
    Title="DobavljaÄi / Serviseri â€“ YasGMP">

  <ContentPage.Content>
    <VerticalStackLayout Padding="28,20,28,20" Spacing="18" BackgroundColor="{StaticResource YtSurface}">
      <Border Background="{StaticResource YtSurfaceCard}" Padding="20" Stroke="{StaticResource YtRowBorder}" StrokeThickness="1">
        <Border.StrokeShape>
          <RoundRectangle CornerRadius="14" />
        </Border.StrokeShape>
        <Border.Shadow>
          <Shadow />
        </Border.Shadow>

        <VerticalStackLayout Spacing="16">
          <Label 
            Text="Pregled svih dobavljaÄa, servisera i laboratorija"
            FontSize="22" FontAttributes="Bold"
            TextColor="{StaticResource YtPrimary700}"
            HorizontalOptions="Center"/>

          <HorizontalStackLayout Spacing="14">
            <Button 
              Text="âž• Dodaj novog dobavljaÄa"
              Clicked="OnAddSupplierClicked"
              BackgroundColor="{StaticResource YtPrimary600}"
              TextColor="White"
              FontAttributes="Bold"
              maui:ToolTipProperties.Text="Unos novog dobavljaÄa ili servisera." />

            <Button 
              Text="âœï¸ Uredi"
              Clicked="OnEditSupplierClicked"
              BackgroundColor="{StaticResource YtAccent50}"
              TextColor="{StaticResource YtAccent700}"
              FontAttributes="Bold"
              maui:ToolTipProperties.Text="UreÄ‘ivanje odabranog dobavljaÄa." />

            <Button 
              Text="ðŸ—‘ï¸ BriÅ¡i"
              Clicked="OnDeleteSupplierClicked"
              BackgroundColor="{StaticResource YtDanger700}"
              TextColor="White"
              FontAttributes="Bold"
              maui:ToolTipProperties.Text="Brisanje odabranog dobavljaÄa iz baze." />
          </HorizontalStackLayout>

            <CollectionView 
              x:Name="SupplierListView"
              ItemsSource="{Binding Suppliers}"
              SelectionMode="Single"
              HeightRequest="440"
              BackgroundColor="{StaticResource YtSurface}">

            <CollectionView.ItemTemplate>
              <DataTemplate x:DataType="models:Supplier">
                <Border Margin="0,2,0,2" Padding="10" Background="{StaticResource YtSurface}" Stroke="{StaticResource YtRowBorder}" StrokeThickness="1">
                  <Border.StrokeShape>
                    <RoundRectangle CornerRadius="8" />
                  </Border.StrokeShape>

                  <VerticalStackLayout Spacing="3">
                    <Label 
                      Text="{Binding Name}"
                      FontSize="17"
                      FontAttributes="Bold"
                      TextColor="{StaticResource YtOnSurface}" />
                    <Label 
                      Text="{Binding SupplierType}"
                      FontSize="13"
                      TextColor="{StaticResource YtSuccess700}"
                      maui:ToolTipProperties.Text="Tip dobavljaÄa (dijelovi, servis, laboratorij...)" />
                    <Label 
                      Text="{Binding VatNumber, StringFormat='OIB: {0}'}"
                      FontSize="12"
                      TextColor="{StaticResource YtOnSurfaceDim}" />
                    <Label 
                      Text="{Binding Address}"
                      FontSize="12"
                      TextColor="{StaticResource YtOnSurfaceDim}" />
                    <Label 
                      Text="{Binding Email}"
                      FontSize="12"
                      TextColor="{StaticResource YtPrimary700}" />
                    <Label 
                      Text="{Binding Phone}"
                      FontSize="12"
                      TextColor="{StaticResource YtOnSurfaceDim}" />
                    <Label 
                      Text="{Binding ContractFile}"
                      FontSize="12"
                      TextColor="{StaticResource YtAccent700}"
                      maui:ToolTipProperties.Text="Putanja do PDF ugovora/certifikata" />
                    <Label 
                      Text="{Binding Notes}"
                      FontSize="12"
                      TextColor="{StaticResource YtDanger700}"
                      maui:ToolTipProperties.Text="Posebne napomene (GMP, partner status, validacija...)" />
                  </VerticalStackLayout>
                </Border>
              </DataTemplate>
            </CollectionView.ItemTemplate>
          </CollectionView>

          <Label
            Text="Kliknite na redak za odabir dobavljaÄa. MoguÄ‡e je ureÄ‘ivati ili brisati samo odabranog."
            FontSize="12"
            TextColor="{StaticResource YtOnSurfaceDim}"
            HorizontalOptions="Center"/>
        </VerticalStackLayout>
      </Border>
    </VerticalStackLayout>
  </ContentPage.Content>
</ContentPage>
