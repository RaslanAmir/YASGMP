<?xml version="1.0" encoding="utf-8" ?>
<ContentPage 
    x:Class="YasGMP.Views.SuppliersPage"
    xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
    xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
    xmlns:maui="http://schemas.microsoft.com/dotnet/2021/maui"
    Title="Dobavljači / Serviseri – YasGMP">

  <ContentPage.Content>
    <VerticalStackLayout Padding="28,20,28,20" Spacing="18" BackgroundColor="{StaticResource YtSurface}">
      <Frame BackgroundColor="{StaticResource YtSurfaceCard}" CornerRadius="14" HasShadow="True" Padding="20"
             BorderColor="{StaticResource YtRowBorder}">

        <VerticalStackLayout Spacing="16">
          <Label 
            Text="Pregled svih dobavljača, servisera i laboratorija"
            FontSize="22" FontAttributes="Bold"
            TextColor="{StaticResource YtPrimary700}"
            HorizontalOptions="Center"/>

          <HorizontalStackLayout Spacing="14">
            <Button 
              Text="➕ Dodaj novog dobavljača"
              Clicked="OnAddSupplierClicked"
              BackgroundColor="{StaticResource YtPrimary600}"
              TextColor="White"
              FontAttributes="Bold"
              maui:ToolTipProperties.Text="Unos novog dobavljača ili servisera." />

            <Button 
              Text="✏️ Uredi"
              Clicked="OnEditSupplierClicked"
              BackgroundColor="{StaticResource YtAccent50}"
              TextColor="{StaticResource YtAccent700}"
              FontAttributes="Bold"
              maui:ToolTipProperties.Text="Uređivanje odabranog dobavljača." />

            <Button 
              Text="🗑️ Briši"
              Clicked="OnDeleteSupplierClicked"
              BackgroundColor="{StaticResource YtDanger700}"
              TextColor="White"
              FontAttributes="Bold"
              maui:ToolTipProperties.Text="Brisanje odabranog dobavljača iz baze." />
          </HorizontalStackLayout>

          <CollectionView 
            x:Name="SupplierListView"
            ItemsSource="{Binding Suppliers}"
            SelectionMode="Single"
            HeightRequest="440"
            BackgroundColor="{StaticResource YtSurface}">

            <CollectionView.ItemTemplate>
              <DataTemplate>
                <Frame 
                  Margin="0,2,0,2"
                  CornerRadius="8"
                  Padding="10"
                  BackgroundColor="{StaticResource YtSurface}"
                  HasShadow="False"
                  BorderColor="{StaticResource YtRowBorder}">

                  <VerticalStackLayout Spacing="3">
                    <Label 
                      Text="{Binding Name}"
                      FontSize="17"
                      FontAttributes="Bold"
                      TextColor="{StaticResource YtOnSurface}" />
                    <Label 
                      Text="{Binding SupplierType}"
                      FontSize="13"
                      TextColor="{StaticResource YtSuccess700}"
                      maui:ToolTipProperties.Text="Tip dobavljača (dijelovi, servis, laboratorij...)" />
                    <Label 
                      Text="{Binding VatNumber, StringFormat='OIB: {0}'}"
                      FontSize="12"
                      TextColor="{StaticResource YtOnSurfaceDim}" />
                    <Label 
                      Text="{Binding Address}"
                      FontSize="12"
                      TextColor="{StaticResource YtOnSurfaceDim}" />
                    <Label 
                      Text="{Binding Email}"
                      FontSize="12"
                      TextColor="{StaticResource YtPrimary700}" />
                    <Label 
                      Text="{Binding Phone}"
                      FontSize="12"
                      TextColor="{StaticResource YtOnSurfaceDim}" />
                    <Label 
                      Text="{Binding ContractFile}"
                      FontSize="12"
                      TextColor="{StaticResource YtAccent700}"
                      maui:ToolTipProperties.Text="Putanja do PDF ugovora/certifikata" />
                    <Label 
                      Text="{Binding Notes}"
                      FontSize="12"
                      TextColor="{StaticResource YtDanger700}"
                      maui:ToolTipProperties.Text="Posebne napomene (GMP, partner status, validacija...)" />
                  </VerticalStackLayout>
                </Frame>
              </DataTemplate>
            </CollectionView.ItemTemplate>
          </CollectionView>

          <Label
            Text="Kliknite na redak za odabir dobavljača. Moguće je uređivati ili brisati samo odabranog."
            FontSize="12"
            TextColor="{StaticResource YtOnSurfaceDim}"
            HorizontalOptions="Center"/>
        </VerticalStackLayout>
      </Frame>
    </VerticalStackLayout>
  </ContentPage.Content>
</ContentPage>
